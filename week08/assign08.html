<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="a javascript calculator">
    <meta name="viewport" content="width=device-width, initial scale=1">

    <link href="style.css" rel="stylesheet">
</head>

<body>
    <form id="form">
        <h3>JavaScript Validation Form</h3>
        <hr>
        <!-- First Name -->
        <label for="name">First Name</label>
		<input type="text" name="first_name" id="name" required>

        <!-- Last Name -->
        <label for="name">Last Name</label>
		<input type="text" name="last_name" id="name" required>

        <!-- Address -->
        <label for="address">Address</label>
		<textarea name="address" id="address" rows="5" cols="25" required></textarea>

        <!-- Phone number -->
        <label for="phone">Phone</label>
		<input type="tel" name="phone" id="phone"
                    pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
                    required>
        <small>Format: 123-456-7890</small>
        <hr>
        <!-- Checkbox for item purchases -->
        <div class="items" method="get">
            <h3>Purchased Items</h3>
            <label for="item_0">iPhone X</label>
            <input type="checkbox" class="item" name="item_0" value="6" data-price='450.00'>
            
            <label for="item_1">Kettle</label>
            <input type="checkbox" class="item" name="item_1" value="14" data-price='55.20'>
            
            <label for="item_2">Blanket</label>
            <input type="checkbox" class="item" name="item_2" value="11" data-price='12.99'>
            
            <label for="item_3">Xbox</label>
            <input type="checkbox" class="item" name="item_3" value="9" data-price='499.00'>
            
            
            <label for="total">Total</label>
            <input type="text" id="total" name="total" size="10" readonly>
            
        </div>
        <hr>
        <!--    Credit card    -->
        <div class="card_field">
            <p>Credit Card</p>
            <label for="card">Visa</label>
            <input type="radio" id="card" name="card" value="visa">

            <label for="card">Mastercard</label>
            <input type="radio" id="card" name="card" value="mastercard">

            <label for="card">American Express</label>
            <input type="radio" id="card" name="card" value="american">
        </div>
        
        
        <!-- Credit Card Validation -->
        <br>
        <label for="phone">Credit Card</label>
		<input type="tel" name="phone" id="phone"
                     pattern="[0-9]{4} [0-9]{4} [0-9]{4} [0-9]{4}"
                    required>
        <small>Format: xxxx xxxx xxxx xxxx</small>
        
        <!-- Credit Card Validation -->
        <br>
        <label for="phone">Credit Card - Expiry Date</label>
		<input type="tel" name="exp_date" id="exp_date"
                    maxlength="7" pattern="[0-9]{2}/[0-9]{4}"
                    required>
        <small>Format: mm/year</small>
        <br>
        <button type="submit" onclick="formValidation();">Submit</button>

        <button type="reset">Reset</button>
        <hr>
        <p><span id="output"></span></p>
    </form>

    <script>
        window.onload = () =>
        document.querySelectorAll(".item").forEach(input=>input.addEventListener("change",formValidation));

        function formValidation() {
        // when checkbox is clicked
        let sum = 0;
        document.querySelectorAll(".item").forEach(input=>sum += (input.checked? Number.parseFloat(input.getAttribute("data-price")):0));
        document.getElementById("total").value = sum;

        // Display on output id
        let first_name = document.getElementById("first_name").value;
        let last_name = document.getElementById("last_name").value;
        let address = document.getElementById("address").value;
        let phone = document.getElementById("phone").value;

        
        let card = document.getElementById("card").value;
        let credit_card = document.getElementById("credit_card").value;
        let exp_date = document.getElementById("exp_date").value;

        
        

        document.getElementById("output").innerText = "Customer information" + first_name + last_name +
                                                        address + phone + total + card + credit_card + exp_date;
    }
    </script>
    
</body>
</html>